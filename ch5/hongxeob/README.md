## 안정 해시(Consistent Hashing)의 핵심 개념

1. **기본 원리**: 안정 해시는 해시 공간을 원형으로 표현하고, 서버와 데이터를 모두 이 원 위에 배치합니다. 데이터는 시계 방향으로 가장 가까운 서버에 할당됩니다.

2. **일반 해시와의 차이점**: 
   - 일반 해시: 서버 추가/제거 시 대부분의 키가 재배치됨
   - 안정 해시: 서버 변경 시 영향받는 키가 최소화됨 (k/n개 정도만 재배치, k는 키 수, n은 서버 수)

3. **적용 사례**:
   - **로드 밸런서**: 요청을 여러 서버에 균등하게 분배
   - **카프카/주키퍼**: 파티션 관리 및 분산 조정
   - **쿠버네티스**: 파드(컨테이너) 균등 분배
   - **데이터베이스 샤딩**: 데이터를 여러 노드에 분산 저장

4. **문제점과 해결책**:
   - **서버 skew 문제**: 해시 공간에 서버가 균등하게 분포되지 않으면 부하 불균형 발생
   - **해결책**: 가상 노드 기법으로 각 서버를 여러 개의 가상 노드로 표현

## 비즈니스 애플리케이션 관점의 적용

비즈니스 애플리케이션보다는 인프라 레벨에서 더 많이 사용되지만, 스케일 아웃 계획에서 고려해야 할 사항:

1. **스케일 아웃 시점 결정**: 
   - 서버 부하 지표 모니터링(CPU, 메모리, 응답 시간)
   - 임계치 설정 및 자동 스케일링 고려

2. **균등 해시 응용 전략**:
   - 세션 관리: 사용자를 특정 서버에 지속적으로 연결
   - 캐시 분산: 캐시 데이터를 여러 노드에 효율적으로 분배
   - API 요청 라우팅: 특정 유형의 요청을 전담 서버로 라우팅

3. **실제 구현 고려사항**:
   - 가상 노드 수 결정 (일반적으로 서버당 100~200개)
   - 해시 함수 선택 (MD5, SHA-1 등)
   - 동적 재조정 메커니즘 설계

> - 안정 해시는 분산 시스템에서 서버 변경에 따른 데이터 재배치를 최소화하여 시스템 안정성과 확장성을 높이는 핵심 기술이다.<br>
> - 직접 구현하기보다 대부분 미들웨어나 데이터베이스가 제공하는 기능을 활용하는 경우가 많지만, 대규모 시스템 설계 시 작동 원리를 이해하고 있으면 아키텍처 결정에 도움이 된다..
